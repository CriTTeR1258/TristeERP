(self.webpackChunk=self.webpackChunk||[]).push([[657],{7757:(t,e,i)=>{t.exports=i(5666)},5020:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var a=i(3645),r=i.n(a)()((function(t){return t[1]}));r.push([t.id,"input::-webkit-calendar-picker-indicator{opacity:0}#detail_form_modal .modal-dialog{margin-top:100px;max-width:1260px}.container{max-width:none}",""]);const n=r},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var n=0;n<this.length;n++){var s=this[n][0];null!=s&&(r[s]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);a&&r[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),e.push(c))}},e}},5666:t=>{var e=function(t){"use strict";var e,i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,i){return t[e]=i}}function l(t,e,i,a){var r=e&&e.prototype instanceof f?e:f,n=Object.create(r.prototype),s=new T(a||[]);return n._invoke=function(t,e,i){var a=_;return function(r,n){if(a===p)throw new Error("Generator is already running");if(a===m){if("throw"===r)throw n;return E()}for(i.method=r,i.arg=n;;){var s=i.delegate;if(s){var o=S(s,i);if(o){if(o===h)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===_)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=p;var c=d(t,e,i);if("normal"===c.type){if(a=i.done?m:u,c.arg===h)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=m,i.method="throw",i.arg=c.arg)}}}(t,i,s),n}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var _="suspendedStart",u="suspendedYield",p="executing",m="completed",h={};function f(){}function b(){}function v(){}var g={};c(g,n,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(N([])));x&&x!==i&&a.call(x,n)&&(g=x);var w=v.prototype=f.prototype=Object.create(g);function $(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(r,n,s,o){var c=d(t[r],t,n);if("throw"!==c.type){var l=c.arg,_=l.value;return _&&"object"==typeof _&&a.call(_,"__await")?e.resolve(_.__await).then((function(t){i("next",t,s,o)}),(function(t){i("throw",t,s,o)})):e.resolve(_).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,o)}))}o(c.arg)}var r;this._invoke=function(t,a){function n(){return new e((function(e,r){i(t,a,e,r)}))}return r=r?r.then(n,n):n()}}function S(t,i){var a=t.iterator[i.method];if(a===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,S(t,i),"throw"===i.method))return h;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=d(a,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,h;var n=r.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,h):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,h)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function N(t){if(t){var i=t[n];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function i(){for(;++r<t.length;)if(a.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:E}}function E(){return{value:e,done:!0}}return b.prototype=v,c(w,"constructor",v),c(v,"constructor",b),b.displayName=c(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,o,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},$(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,i,a,r,n){void 0===n&&(n=Promise);var s=new C(l(e,i,a,r),n);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},$(w),c(w,o,"Generator"),c(w,n,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var a=e.pop();if(a in t)return i.value=a,i.done=!1,i}return i.done=!0,i}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(a,r){return o.type="throw",o.arg=t,i.next=a,r&&(i.method="next",i.arg=e),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var r=a.arg;k(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,a){return this.delegate={iterator:N(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},3379:(t,e,i)=>{"use strict";var a,r=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},n=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),s=[];function o(t){for(var e=-1,i=0;i<s.length;i++)if(s[i].identifier===t){e=i;break}return e}function c(t,e){for(var i={},a=[],r=0;r<t.length;r++){var n=t[r],c=e.base?n[0]+e.base:n[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var _=o(d),u={css:n[1],media:n[2],sourceMap:n[3]};-1!==_?(s[_].references++,s[_].updater(u)):s.push({identifier:d,updater:f(u,e),references:1}),a.push(d)}return a}function l(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var r=i.nc;r&&(a.nonce=r)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var s=n(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var d,_=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function u(t,e,i,a){var r=i?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var n=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(n,s[e]):t.appendChild(n)}}function p(t,e,i){var a=i.css,r=i.media,n=i.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var m=null,h=0;function f(t,e){var i,a,r;if(e.singleton){var n=h++;i=m||(m=l(e)),a=u.bind(null,i,n,!1),r=u.bind(null,i,n,!0)}else i=l(e),a=p.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var i=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<i.length;a++){var r=o(i[a]);s[r].references--}for(var n=c(t,e),l=0;l<i.length;l++){var d=o(i[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}i=n}}}},3657:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u});var a=i(7757),r=i.n(a);function n(t,e,i,a,r,n,s){try{var o=t[n](s),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,r)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(a,r){var s=t.apply(e,i);function o(t){n(s,a,r,o,c,"next",t)}function c(t){n(s,a,r,o,c,"throw",t)}o(void 0)}))}}const o={data:function(){return{csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),receipt_id:0,url_report:"",bool_receipt_modify:!1,bool_detail_modify:!1,show_receipt_table:!0,show_receipt_form:!1,latest_id_account:0,receipt_serie:"",receipt_status:"",receipt_receipt_type:-1,receipt_exchange:"0",receipt_money:0,receipt_comment:"",detail_account:"",detail_comment:"",detail_debit:"0",detail_credit:"0",detail_rows:[]}},props:{errors:Array,data_receipt_type:Array,data_money:Array,data_account:Array,money_exchange:Number,et_receipt_serie:String,et_receipt_date:String,et_receipt_status:String,et_receipt_receipt_type:String,et_receipt_exchange:String,et_receipt_money:String,et_receipt_comment:String,et_detail_account:String,et_detail_comment:String,et_detail_debit:String,et_detail_credit:String,et_total:String,opt_receipt_receipt_type_default:String,opt_detail_account_default:String,receipt_rows:Array,receipt_columns:Array,receipt_table_name:String,receipt_column_order:Number,receipt_check_order_desc:Boolean,detail_columns:Array,detail_table_name:String,detail_column_order:Number,btn_close:String,btn_addDetail:String,receipt_check_remove_bfilter:Boolean,detail_check_remove_bfilter:Boolean,mssg_noselect_row:String,mssg_error_function_not_available:String,mssg_receipt_date_empty:String,mssg_receipt_receipt_type_noselect:String,mssg_receipt_exchange_empty:String,mssg_receipt_money_noselect:String,mssg_receipt_comment_empty:String,mssg_detail_table_amount_insufficient:String,mssg_detail_account_noselect:String,mssg_detail_comment_empty:String,mssg_detail_debit_empty:String,mssg_detail_credit_empty:String,mssg_detail_account_exist:String,mssg_question_receipt_annular:String,mssg_receipt_total_not_equals:String,btn_mssg_receipt_annular_close:String,btn_mssg_receipt_annular_confirm:String,mssg_success_add:String,mssg_receipt_annular_success:String,mssg_detail_debit_credit_invalid:String,detail_comment_maximum_digits:Number,detail_debit_maximum_digits:Number,detail_credit_maximum_digits:Number,receipt_exchange_maximum_digits:Number,receipt_comment_maximum_digits:Number},methods:{reload:function(){var t=this;$.ajaxSetup({headers:{"X-CSRF-TOKEN":this.csrf}}),$.ajax({type:"POST",url:"/comprobante",data:{},success:function(e){if(1==e.Success){var i=[],a=[];if(e.content.length>0)a=Object.keys(e.content[0]);e.content.forEach((function(t){var e=[];a.forEach((function(i){e.push(t[i])})),i.push(e)})),t.$refs.table.dt.clear().draw(),t.$refs.table.dt.rows.add(i).draw()}else toastr.error(e.content)},error:function(t){console.log(t),toastr.error(this.mssg_fail)}})},setTotalValue:function(){var t=this.$refs.table2.dt,e=parseFloat("0").toFixed(2),i=parseFloat("0").toFixed(2);t.rows().every((function(){!$(this.node()).hasClass("text-wrap")&&$(this.node()).addClass("text-wrap"),!$(this.node()).hasClass("text-break")&&$(this.node()).addClass("text-break");var a=this.data();e=(parseFloat(e)+parseFloat(a[a.length-2])).toFixed(2),i=(parseFloat(i)+parseFloat(a[a.length-1])).toFixed(2);var r=$(t.cell(this.index(),a.length-2).node()),n=$(t.cell(this.index(),a.length-1).node());!r.hasClass("text-end")&&r.addClass("text-end"),!n.hasClass("text-end")&&n.addClass("text-end")})),$("#debitTotal_amount").text(e),$("#creditTotal_amount").text(i)},cssDetailTable:function(){var t=this.detail_table_name;$("#"+t+"_wrapper thead .tb_column_1").css("width","30%"),$("#"+t+"_wrapper thead .tb_column_2").css("width","40%"),$("#"+t+"_wrapper thead .tb_column_3").css("width","15%"),$("#"+t+"_wrapper thead .tb_column_4").css("width","15%")},action_debit_credit_change:function(t){this.detail_debit>0&&$("#detail_debit").is($(t.srcElement))?$("#detail_credit").attr("disabled",!0):this.detail_credit>0&&$("#detail_credit").is($(t.srcElement))?$("#detail_debit").attr("disabled",!0):0==this.detail_debit&&$("#detail_debit").is($(t.srcElement))?this.detail_debit.length>1?$("#detail_credit").attr("disabled",!0):$("#detail_credit").attr("disabled",!1):0==this.detail_credit&&$("#detail_credit").is($(t.srcElement))&&(this.detail_credit.length>1?$("#detail_debit").attr("disabled",!0):$("#detail_debit").attr("disabled",!1))},action_receipt_comment_change:function(){this.detail_comment=this.receipt_comment},clearField_ReceiptForm:function(){this.bool_detail_modify=!1,this.receipt_id=0,this.receipt_serie="";var t=moment().format("DD/MM/YYYY");$("#receipt_date").val(t),this.receipt_status="",this.receipt_receipt_type=-1,this.receipt_exchange=this.money_exchange.toString(),$("#receipt_money > option").length>0&&(this.receipt_money=$("#receipt_money > option:first").val()),this.receipt_comment="",$("#debitTotal_amount").text("0.00"),$("#creditTotal_amount").text("0.00"),this.$refs.table2.dt.clear().draw(),this.cssDetailTable()},clearField_DetailForm:function(){this.detail_account="",this.detail_debit="0",this.detail_credit="0",$("#detail_debit").attr("disabled",!1),$("#detail_credit").attr("disabled",!1)},verify_detail_data:function(){return 0==$("#"+$("#detail_account").attr("list")+" option[value='"+this.detail_account+"']").length?(toastr.error(this.mssg_detail_account_noselect),!1):0==this.detail_comment.trim().length?(toastr.error(this.mssg_detail_comment_empty),!1):0==this.detail_debit.trim().length?(toastr.error(this.mssg_detail_debit_empty),!1):0==this.detail_credit.trim().length?(toastr.error(this.mssg_detail_credit_empty),!1):!(0==parseFloat(this.detail_debit.trim())&&0==parseFloat(this.detail_credit.trim())||2==this.detail_debit.trim().length&&1==this.detail_debit.trim().indexOf(".")||2==this.detail_credit.trim().length&&1==this.detail_credit.trim().indexOf("."))||(toastr.error(this.mssg_detail_debit_credit_invalid),!1)},verify_data_before_confirm:function(){var t=0,e="",i=this.$refs.table2.dt,a=parseFloat("0").toFixed(2),r=parseFloat("0").toFixed(2);return i.rows().every((function(){var t=this.data();a=(parseFloat(a)+parseFloat(t[t.length-2])).toFixed(2),r=(parseFloat(r)+parseFloat(t[t.length-1])).toFixed(2)})),a==r?t+=1:e=this.mssg_receipt_total_not_equals,$("#receipt_date").val().trim().length>0?t+=1:e=this.mssg_receipt_date_empty,this.receipt_receipt_type>-1?t+=1:e=this.mssg_receipt_receipt_type_noselect,2==this.receipt_exchange.length&&1==this.receipt_exchange.indexOf(".")?e=this.mssg_receipt_exchange_empty:t+=1,this.receipt_money>0?t+=1:e=this.mssg_receipt_money_noselect,this.receipt_comment.trim().length>0?t+=1:e=this.mssg_receipt_comment_empty,null!=this.$refs.table2.dt.rows().data()&&this.$refs.table2.dt.rows().data().length>1?t+=1:e=this.mssg_detail_table_amount_insufficient,7==t||(toastr.error(e),!1)},actionShowReceiptForm:function(){this.show_receipt_table=!1,this.show_receipt_form=!0,this.cssDetailTable()},actionShowDetailForm:function(){if(this.bool_receipt_modify)toastr.error(this.mssg_error_function_not_available);else{if(this.bool_detail_modify){var t=this.$refs.table2.dt.row({selected:!0}).data();this.latest_id_account=t[0],this.detail_account=t[1],this.detail_comment=t[2],this.detail_debit=t[3],this.detail_credit=t[4],this.detail_debit>0?$("#detail_credit").attr("disabled",!0):0==this.detail_debit&&$("#detail_credit").attr("disabled",!1),this.detail_credit>0?$("#detail_debit").attr("disabled",!0):0==this.detail_credit&&$("#detail_debit").attr("disabled",!1)}$("#detail_form_modal").modal("show")}},actionShowReceiptTable:function(){this.bool_receipt_modify?(this.show_receipt_table=!0,this.show_receipt_form=!1,this.clearField_ReceiptForm(),this.clearField_DetailForm(),this.cssDetailTable(),this.detail_comment="",this.bool_receipt_modify=!1,$("#receipt_date").attr("disabled",!1),$("#receipt_receipt_type").attr("disabled",!1),$("#receipt_exchange").attr("disabled",!1),$("#receipt_money").attr("disabled",!1),$("#receipt_comment").attr("disabled",!1),$("#btn_detail_add").attr("disabled",!1),$("#btn_detail_form_delete").attr("disabled",!1),$("#btn_addDetail").attr("disabled",!1),$("#btn_receipt_form_delete").attr("disabled",!1)):(this.clearField_ReceiptForm(),this.clearField_DetailForm(),this.detail_comment="",this.show_receipt_table=!0,this.show_receipt_form=!1)},actionModifyReceipt:function(){var t=this;if(this.$refs.table.dt.row({selected:!0}).any()){$.ajaxSetup({headers:{"X-CSRF-TOKEN":this.csrf}});var e=this.$refs.table.dt.row({selected:!0}).data();this.receipt_id=e[0],$.ajax({type:"POST",url:"/comprobante",data:{only_receipt:"true",receiptID:e[0]},success:function(e){if(1==e.Success){2==e.content.NumEstado&&$("#btn_receipt_form_delete").attr("disabled",!0),t.receipt_serie=e.content.Serie,$("#receipt_date").val(e.content.Fecha),t.receipt_status=e.content.Estado,t.receipt_receipt_type=parseInt(e.content.TipoComprobante),t.receipt_exchange=e.content.TC,t.receipt_money=e.content.IdMoneda,t.receipt_comment=e.content.Glosa,$("#receipt_serie").attr("disabled",!0),$("#receipt_date").attr("disabled",!0),$("#receipt_receipt_type").attr("disabled",!0),$("#receipt_exchange").attr("disabled",!0),$("#receipt_money").attr("disabled",!0),$("#receipt_comment").attr("disabled",!0),$("#btn_detail_add").attr("disabled",!0),$("#btn_detail_form_delete").attr("disabled",!0),$("#btn_addDetail").attr("disabled",!0),t.bool_receipt_modify=!0,t.show_receipt_table=!1,t.show_receipt_form=!0;var i=[],a=[];if(e.content2.length>0)a=Object.keys(e.content2[0]);e.content2.forEach((function(t){var e=[];parseFloat(t[a[a.length-2]]),parseFloat(t[a[a.length-1]]),a.forEach((function(i){e.push(t[i])})),i.push(e)})),t.$refs.table2.dt.clear().draw(),t.$refs.table2.dt.rows.add(i).draw(),t.setTotalValue(),t.cssDetailTable()}else toastr.error(e.content)},error:function(t){console.log(t),toastr.error(this.mssg_fail)}})}else toastr.error(this.mssg_noselect_row)},actionAdd:function(){var t,e=this;if(this.bool_receipt_modify)toastr.error(this.mssg_error_function_not_available);else if(this.verify_data_before_confirm()){var i=moment($("#receipt_date").val().trim(),"DD/MM/YYYY").format("YYYY-MM-DD");$.ajaxSetup({headers:{"X-CSRF-TOKEN":this.csrf}}),$.ajax({type:"POST",url:"/comprobante",data:{insert:"true",comment:this.receipt_comment,date:i,exchange:this.receipt_exchange,receiptType:this.receipt_receipt_type,moneyID:this.receipt_money,data_detail:this.$refs.table2.dt.rows().data().toArray()},success:(t=s(r().mark((function t(i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=i.Success){t.next=20;break}return toastr.success(e.mssg_success_add),t.next=4,e.reload();case 4:e.detail_comment="",e.receipt_id=i.content[0],e.receipt_serie=i.content[1],e.receipt_status=i.content[2],$("#receipt_date").attr("disabled",!0),$("#receipt_receipt_type").attr("disabled",!0),$("#receipt_exchange").attr("disabled",!0),$("#receipt_money").attr("disabled",!0),$("#receipt_comment").attr("disabled",!0),$("#btn_detail_add").attr("disabled",!0),$("#btn_detail_form_delete").attr("disabled",!0),$("#btn_addDetail").attr("disabled",!0),e.bool_receipt_modify=!0,e.clearField_DetailForm(),t.next=21;break;case 20:toastr.error(i.content);case 21:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),error:function(t){console.log(t),toastr.error(this.mssg_fail)}})}},actionAddDetail:function(){var t=this.$refs.table2.dt,e=this.bool_detail_modify,i=this.latest_id_account,a=[],r=[],n=[];if(this.bool_receipt_modify)toastr.error(this.mssg_error_function_not_available);else if(this.verify_detail_data()){var s=$("#"+$("#detail_account").attr("list")+" option[value='"+this.detail_account+"']").attr("data_id"),o=this.detail_account,c=!1;if(t.rows().every((function(t,e,o){var l=this.data();l[0]==s&&(s==i&&(a=this),r=l,c=!0),i==l[0]&&i!=s&&(n=l,a=this,c=!0)})),c&&e)if(i==s){var l=parseFloat(this.detail_debit).toFixed(2),d=parseFloat(this.detail_credit).toFixed(2);r[2]=this.detail_comment,r[3]=l,r[4]=d,t.row(a).data(r).draw(),this.setTotalValue(),c=!1}else if(0!=i){if(0==r.length){l=parseFloat(this.detail_debit).toFixed(2),d=parseFloat(this.detail_credit).toFixed(2);n[0]=s,n[1]=this.detail_account,n[2]=this.detail_comment,n[3]=l,n[4]=d,t.row(a).data(n).draw(),this.setTotalValue(),c=!1}}else c=!1;if(c||e)c?toastr.error(this.mssg_detail_account_exist):$("#detail_form_modal").modal("hide");else{l=parseFloat(this.detail_debit).toFixed(2),d=parseFloat(this.detail_credit).toFixed(2);var _=[[s,o,this.detail_comment,l,d]];t.rows.add(_).draw(),this.setTotalValue(),this.clearField_DetailForm()}this.cssDetailTable()}},actionDeleteReceipt:function(){var t=this;if(this.bool_receipt_modify){var e=this.receipt_id;this.$swal.fire({title:this.mssg_question_receipt_annular,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.btn_mssg_receipt_annular_close,confirmButtonText:this.btn_mssg_receipt_annular_confirm}).then((function(i){var a;i.isConfirmed&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":t.csrf}}),$.ajax({type:"POST",url:"/comprobante",data:{annular_receipt:"true",receiptID:e},success:(a=s(r().mark((function e(i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=i.Success){e.next=8;break}return toastr.success(t.mssg_receipt_annular_success),e.next=4,t.reload();case 4:t.receipt_status=i.content,$("#btn_receipt_form_delete").attr("disabled",!0),e.next=9;break;case 8:toastr.error(i.content);case 9:case"end":return e.stop()}}),e)}))),function(t){return a.apply(this,arguments)}),error:function(t){console.log(t),toastr.error(this.mssg_fail)}}))}))}else toastr.error(this.mssg_error_function_not_available)},actionDeleteDetail:function(){this.bool_receipt_modify?toastr.error(this.mssg_error_function_not_available):this.$refs.table2.dt.row({selected:!0}).any()?(this.$refs.table2.dt.row({selected:!0}).remove().draw(),this.setTotalValue(),this.bool_detail_modify&&(this.bool_detail_modify=!1,this.detail_comment=this.receipt_comment,this.clearField_DetailForm())):toastr.error(this.mssg_noselect_row)},detail_select_row:function(){this.bool_detail_modify=!0},detail_deselect_row:function(){this.bool_detail_modify=!1,this.detail_comment=this.receipt_comment,0!=this.latest_id_account&&(this.latest_id_account=0),0==this.detail_debit&&$("#detail_credit").attr("disabled",!1),0==this.detail_credit&&$("#detail_debit").attr("disabled",!1),this.clearField_DetailForm()},actionReport:function(){this.url_report=document.querySelector('meta[name="url_report"]').getAttribute("content")+this.receipt_id,window.open(this.url_report,"_blank")},actionNewForm:function(){this.receipt_id=0,this.bool_receipt_modify=!1,this.detail_comment="",this.clearField_DetailForm(),this.clearField_ReceiptForm(),this.cssDetailTable(),$("#receipt_date").attr("disabled",!1),$("#receipt_receipt_type").attr("disabled",!1),$("#receipt_exchange").attr("disabled",!1),$("#receipt_money").attr("disabled",!1),$("#receipt_comment").attr("disabled",!1),$("#btn_detail_add").attr("disabled",!1),$("#btn_detail_form_delete").attr("disabled",!1),$("#btn_addDetail").attr("disabled",!1)}},mounted:function(){var t=this,e=$("#"+this.detail_table_name),i=moment().format("DD/MM/YYYY");$(document).ready((function(){$("#receipt_date").val(i),e.on("select.dt",t.detail_select_row),e.on("deselect.dt",t.detail_deselect_row),$("#receipt_serie").attr("disabled",!0),$("#receipt_money > option").length>0&&(t.receipt_money=$("#receipt_money > option:first").val()),1==t.data_money.length&&$("#receipt_exchange").attr("disabled",!0),t.receipt_exchange=t.money_exchange.toString()})),console.log("Component mounted.")}};var c=i(3379),l=i.n(c),d=i(5020),_={insert:"head",singleton:!1};l()(d.Z,_);d.Z.locals;const u=(0,i(1900).Z)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show_receipt_table,expression:"show_receipt_table"}],staticClass:"breadcome-list text-light row"},[i("div",{staticClass:"d-flex justify-content-end"},[i("div",{staticClass:"col-3 text-end",staticStyle:{"margin-bottom":"-33px","z-index":"100","padding-right":"0"}},[i("button",{staticClass:"btn btn-primary me-1 ps-3 pe-3",attrs:{id:"btn_receipt_add",type:"button"},on:{click:t.actionShowReceiptForm}},[i("i",{staticClass:"bi bi-plus"})]),t._v(" "),i("button",{staticClass:"btn btn-success ps-3 pe-3",attrs:{id:"btn_receipt_modify",type:"button"},on:{click:t.actionModifyReceipt}},[i("i",{staticClass:"bi bi-pencil-square"})])])]),t._v(" "),i("custom_table",{ref:"table",staticClass:"col-12",attrs:{columns:t.receipt_columns,data:t.receipt_rows,table_name:t.receipt_table_name,check_order_desc:t.receipt_check_order_desc,column_order:t.receipt_column_order,check_remove_bfilter:t.receipt_check_remove_bfilter}})],1),t._v(" "),i("div",{staticClass:"modal",attrs:{id:"detail_form_modal",tabindex:"-1"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"row"},[i("div",{staticClass:"d-flex flex-row"},[i("div",{staticClass:"col-3 me-4"},[i("label",{staticClass:"form-label",attrs:{for:"detail_account"}},[t._v(t._s(t.et_detail_account))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail_account,expression:"detail_account"}],staticClass:"form-control",attrs:{type:"text",list:"data_list_detail_account",id:"detail_account",placeholder:t.opt_detail_account_default},domProps:{value:t.detail_account},on:{input:function(e){e.target.composing||(t.detail_account=e.target.value)}}}),t._v(" "),i("datalist",{attrs:{id:"data_list_detail_account"}},t._l(t.data_account,(function(t){return i("option",{key:t.id,attrs:{data_id:t.id},domProps:{value:t.Codigo+" "+t.Nombre}})})),0)]),t._v(" "),i("div",{staticClass:"col-3 me-4"},[i("label",{staticClass:"form-label",attrs:{for:"detail_comment"}},[t._v(t._s(t.et_detail_comment))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail_comment,expression:"detail_comment"}],staticClass:"form-control",attrs:{type:"text",id:"detail_comment",oninput:"this.value = this.value.replace(/[^0-9a-zA-Z\\.\\ \\,]/g, '').replace(/(\\*)\\./g, '$1');",maxlength:t.detail_comment_maximum_digits},domProps:{value:t.detail_comment},on:{input:function(e){e.target.composing||(t.detail_comment=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-2 me-4"},[i("label",{staticClass:"form-label",attrs:{for:"detail_debit"}},[t._v(t._s(t.et_detail_debit))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail_debit,expression:"detail_debit"}],staticClass:"form-control text-end",attrs:{type:"text",id:"detail_debit",oninput:"this.value = this.value.replace(/[^0-9\\.]/g, '').replace(/(\\..*)\\./g, '$1'); if(this.value.length > 1 && this.value.substring(0, 1) == '0'){ if(!isNaN(this.value.substring(1, 2))){this.value=this.value.substring(1);} } if(this.value.length == 0){ this.value='0'; } if(this.value.length > 0 && this.value.substring(0, 1) == '.'){ this.value = '0'; } if(this.value.search('\\\\.') > -1){ if(this.value.substring(this.value.search('\\\\.')).length > 3){ this.value = this.value.substring(0, this.value.length - 1); } }",maxlength:t.detail_debit_maximum_digits},domProps:{value:t.detail_debit},on:{change:t.action_debit_credit_change,input:function(e){e.target.composing||(t.detail_debit=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-2 me-4"},[i("label",{staticClass:"form-label",attrs:{for:"detail_credit"}},[t._v(t._s(t.et_detail_credit))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail_credit,expression:"detail_credit"}],staticClass:"form-control text-end",attrs:{type:"text",id:"detail_credit",oninput:"this.value = this.value.replace(/[^0-9\\.]/g, '').replace(/(\\..*)\\./g, '$1'); if(this.value.length > 1 && this.value.substring(0, 1) == '0'){ if(!isNaN(this.value.substring(1, 2))){this.value=this.value.substring(1);} } if(this.value.length == 0){ this.value='0'; } if(this.value.length > 0 && this.value.substring(0, 1) == '.'){ this.value = '0'; } if(this.value.search('\\\\.') > -1){ if(this.value.substring(this.value.search('\\\\.')).length > 3){ this.value = this.value.substring(0, this.value.length - 1); } }",maxlength:t.detail_credit_maximum_digits},domProps:{value:t.detail_credit},on:{change:t.action_debit_credit_change,input:function(e){e.target.composing||(t.detail_credit=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-2 mt-4"},[i("button",{staticClass:"btn btn-primary ps-3 pe-3 pb-2 pt-2 ",attrs:{id:"btn_addDetail",type:"button"},on:{click:t.actionAddDetail}},[i("i",{staticClass:"bi bi-plus"})])])])])])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show_receipt_form,expression:"show_receipt_form"}],staticClass:"breadcome-list text-light row fs-6"},[i("div",{staticClass:"row",staticStyle:{"padding-right":"0"}},[i("div",{staticClass:"d-flex justify-content-end",staticStyle:{"padding-right":"0"}},[i("div",{staticClass:"col-3 text-end mb-3"},[i("button",{staticClass:"me-1 ps-3 pe-3 pointer btn btn-info",attrs:{type:"button",id:"btn_receipt_form_back"},on:{click:t.actionShowReceiptTable}},[i("i",{staticClass:"bi bi-arrow-90deg-left"})]),t._v(" "),i("button",{class:["me-1","ps-3","pe-3","pointer",,"btn","btn-success",t.bool_receipt_modify?"d-none":""],attrs:{type:"button",id:"btn_receipt_form_save"},on:{click:t.actionAdd}},[i("i",{staticClass:"bi bi-save2"})]),t._v(" "),i("button",{class:["me-1","ps-3","pe-3","pointer","btn","btn-danger",t.bool_receipt_modify?"":"d-none"],attrs:{type:"button",id:"btn_receipt_form_delete"},on:{click:t.actionDeleteReceipt}},[i("i",{staticClass:"bi bi-trash"})]),t._v(" "),i("button",{class:["me-1","ps-3","pe-3","pointer","btn","btn-success",t.bool_receipt_modify?"":"d-none"],attrs:{type:"button",id:"btn_receipt_form_new"},on:{click:t.actionNewForm}},[i("i",{staticClass:"bi bi-plus"})]),t._v(" "),i("button",{class:["ps-3","pe-3","pointer","btn","btn-warning",t.bool_receipt_modify?"":"d-none"],attrs:{type:"button"},on:{click:t.actionReport}},[i("i",{staticClass:"bi bi-file-text"})])])]),t._v(" "),i("div",{staticClass:"col-12 d-flex flex-wrap justify-content-between",staticStyle:{"padding-right":"0"}},[i("div",{class:["col-12","col-md-5","col-lg-5","col-xl-3","me-2","mb-3","d-flex","justify-content-between"],staticStyle:{"padding-left":"0"}},[i("div",{staticClass:"col-5"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_serie"}},[t._v(t._s(t.et_receipt_serie))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.receipt_serie,expression:"receipt_serie"}],staticClass:"form-control",attrs:{type:"text",id:"receipt_serie",disabled:"",readonly:""},domProps:{value:t.receipt_serie},on:{input:function(e){e.target.composing||(t.receipt_serie=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-7 ms-4"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_date"}},[t._v(t._s(t.et_receipt_date))]),t._v(" "),i("input",{staticClass:"form-control",attrs:{name:"dates",placeholder:"dd/mm/yyyy",type:"text",id:"receipt_date"}})])]),t._v(" "),i("div",{class:["col-12","col-md-6","col-lg-6","col-xl-3","me-2","mb-3","d-flex","justify-content-between"],staticStyle:{"padding-left":"0"}},[i("div",{staticClass:"col-7"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_status"}},[t._v(t._s(t.et_receipt_status))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.receipt_status,expression:"receipt_status"}],staticClass:"form-control",attrs:{type:"text",id:"receipt_status",disabled:"",readonly:""},domProps:{value:t.receipt_status},on:{input:function(e){e.target.composing||(t.receipt_status=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"col-5 ms-4"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_exchange"}},[t._v(t._s(t.et_receipt_exchange))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.receipt_exchange,expression:"receipt_exchange"}],staticClass:"form-control text-end",attrs:{type:"text",id:"receipt_exchange",oninput:"this.value = this.value.replace(/[^0-9\\.]/g, '').replace(/(\\..*)\\./g, '$1'); if(this.value.length > 1 && this.value.substring(0, 1) == '0'){ if(!isNaN(this.value.substring(1, 2))){this.value=this.value.substring(1);} } if(this.value.length == 0){ this.value='0'; } if(this.value.length > 0 && this.value.substring(0, 1) == '.'){ this.value = '0'; } if(this.value.search('\\\\.') > -1){ if(this.value.substring(this.value.search('\\\\.')).length > 3){ this.value = this.value.substring(0, this.value.length - 1); } }",maxlength:t.receipt_exchange_maximum_digits},domProps:{value:t.receipt_exchange},on:{input:function(e){e.target.composing||(t.receipt_exchange=e.target.value)}}})])]),t._v(" "),i("div",{class:["col-12","col-md-5","col-lg-5","col-xl-3","me-2","mb-3","d-flex","justify-content-between"],staticStyle:{"padding-left":"0"}},[i("div",{staticClass:"col-6"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_money"}},[t._v(t._s(t.et_receipt_money))]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.receipt_money,expression:"receipt_money"}],staticClass:"form-select",attrs:{id:"receipt_money"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.receipt_money=e.target.multiple?i:i[0]}}},t._l(t.data_money,(function(e){return i("option",{key:e.ID,domProps:{value:e.ID}},[t._v(t._s(e.Nombre))])})),0)]),t._v(" "),i("div",{staticClass:"col-6 ms-4"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_receipt_type"}},[t._v(t._s(t.et_receipt_receipt_type))]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.receipt_receipt_type,expression:"receipt_receipt_type"}],staticClass:"form-select",attrs:{id:"receipt_receipt_type"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.receipt_receipt_type=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"-1"}},[t._v(" "+t._s(t.opt_receipt_receipt_type_default))]),t._v(" "),t._l(t.data_receipt_type,(function(e,a){return i("option",{key:a,attrs:{selected:""},domProps:{value:a}},[t._v(t._s(e))])}))],2)])]),t._v(" "),i("div",{class:["col-12","col-md-6","col-lg-6","col-xl-2","mb-2","d-flex"],staticStyle:{"padding-left":"0","padding-right":"0"}},[i("div",{staticClass:"col-12"},[i("label",{staticClass:"form-label",attrs:{for:"receipt_comment"}},[t._v(t._s(t.et_receipt_comment))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.receipt_comment,expression:"receipt_comment"}],staticClass:"form-control",attrs:{type:"text",id:"receipt_comment",oninput:"this.value = this.value.replace(/[^0-9a-zA-Z\\.\\ \\,]/g, '').replace(/(\\*)\\./g, '$1');",maxlength:t.receipt_comment_maximum_digits},domProps:{value:t.receipt_comment},on:{change:t.action_receipt_comment_change,input:function(e){e.target.composing||(t.receipt_comment=e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"d-flex justify-content-end mt-3",staticStyle:{"padding-right":"0"}},[i("div",{staticClass:"col-3 text-end",staticStyle:{"z-index":"100"}},[i("button",{class:["btn",t.bool_detail_modify?"btn-success":"btn-primary","me-1","ps-3","pe-3",t.bool_receipt_modify?"d-none":""],attrs:{id:"btn_detail_add",type:"button"},on:{click:t.actionShowDetailForm}},[i("i",{class:["bi",t.bool_detail_modify?"bi-pencil-square":"bi-plus"]})]),t._v(" "),i("button",{class:["ps-3","pe-3","pointer","btn btn-danger",t.bool_receipt_modify?"d-none":""],attrs:{type:"button",id:"btn_detail_form_delete"},on:{click:t.actionDeleteDetail}},[i("i",{staticClass:"bi bi-trash"})])])])]),t._v(" "),i("div",{staticClass:"col-12",staticStyle:{"max-height":"39vh"}},[i("custom_table",{ref:"table2",staticClass:"col-12 mt-3 p-0",attrs:{columns:t.detail_columns,data:t.detail_rows,table_name:t.detail_table_name,column_order:t.detail_column_order,check_remove_bfilter:t.detail_check_remove_bfilter,check_remove_bpaginate:!0,check_remove_binfo:!0,check_disabled_ordering:!0,enable_border:!0}})],1),t._v(" "),i("div",{staticClass:"row justify-content-end",staticStyle:{"padding-right":"0"}},[i("table",{staticClass:"mt-2 text-end col-12 justify-content-end",attrs:{id:"totals",cellspacing:"10",cellpadding:"5"}},[i("tr",[i("th",{staticStyle:{width:"30% !important"}}),t._v(" "),i("th",{staticStyle:{width:"40% !important"}},[i("span",[t._v(t._s(t.et_total)+":")])]),t._v(" "),t._m(1),t._v(" "),t._m(2)])])])])])}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title"}),t._v(" "),i("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticStyle:{width:"15% !important"}},[i("span",{attrs:{id:"debitTotal_amount"}},[t._v("0.00")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticStyle:{width:"15% !important"}},[i("span",{attrs:{id:"creditTotal_amount"}},[t._v("0.00")])])}],!1,null,null,null).exports},1900:(t,e,i)=>{"use strict";function a(t,e,i,a,r,n,s,o){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),a&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=o?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var _=l.beforeCreate;l.beforeCreate=_?[].concat(_,c):[c]}return{exports:t,options:l}}i.d(e,{Z:()=>a})}}]);